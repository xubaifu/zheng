<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zheng.upms.rpc.mapper.UpmsPositionAPIMapper">
	<resultMap id="BaseResultMap"
		type="com.zheng.upms.dao.model.TPositionOrganization">
		<id column="position_id" jdbcType="VARCHAR" property="positionId" />
		<id column="organization_id" jdbcType="VARCHAR" property="organizationId" />
		<result column="sequence" jdbcType="INTEGER" property="sequence" />
		<result column="update_time" jdbcType="DATE" property="updateTime" />
	</resultMap>
	<insert id="insertTPositionOrganization" parameterType="java.util.List">
		insert into t_position_organization (sequence, organization_id, position_id, update_time)
		values
		<foreach collection="list" item="item" index="index" separator="," > 
        	<!-- SELECT  max(sequence)+1, #{item.organizationId}, #{item.positionId}, NOW() from t_position_organization -->
        	(#{item.sequence}, #{item.organizationId}, #{item.positionId}, NOW())
    	</foreach> 
	</insert>

	<select id="selectMaxsequence" resultType="int">
		SELECT  max(sequence) from t_position_organization
	</select>
	<cache type="org.mybatis.caches.ehcache.LoggingEhcache" />

</mapper>